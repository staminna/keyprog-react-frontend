{
  "schema_fixes": {
    "header_menu_sub_menu_fix": {
      "collection": "header_menu",
      "field": "sub_menu",
      "description": "Fix sub_menu field to properly support menu items",
      "current_issue": "Cannot add sub-menu items in Directus admin",
      "solution": {
        "interface": "list",
        "options": {
          "template": "{{title}} - {{link}}",
          "fields": [
            {
              "field": "title",
              "name": "Title",
              "type": "string",
              "meta": {
                "interface": "input",
                "width": "half"
              }
            },
            {
              "field": "link", 
              "name": "Link",
              "type": "string",
              "meta": {
                "interface": "input",
                "width": "half"
              }
            }
          ]
        }
      }
    },
    "contacts_collection_fix": {
      "collection": "contacts",
      "description": "Fix contacts collection to prevent call stack overflow",
      "current_issue": "Maximum call stack size exceeded when saving",
      "potential_causes": [
        "Circular validation rules",
        "Recursive field relationships",
        "Invalid field configuration"
      ],
      "solution": {
        "check_fields": [
          "email",
          "phone"
        ],
        "remove_circular_validations": true,
        "simplify_field_structure": true
      }
    },
    "settings_logo_field": {
      "collection": "settings",
      "field": "logo",
      "description": "Add logo field to settings collection",
      "solution": {
        "field": "logo",
        "type": "uuid",
        "schema": {
          "is_nullable": true,
          "foreign_key_table": "directus_files"
        },
        "meta": {
          "interface": "file-image",
          "special": ["file"],
          "options": {
            "folder": null
          }
        }
      }
    }
  },
  "directus_commands": {
    "header_menu_fix": [
      "1. Go to Settings > Data Model > header_menu collection",
      "2. Edit the 'sub_menu' field",
      "3. Change interface to 'Repeater' or 'List' with proper field structure",
      "4. Configure template: {{title}} - {{link}}",
      "5. Add sub-fields: title (string), link (string)"
    ],
    "contacts_fix": [
      "1. Go to Settings > Data Model > contacts collection", 
      "2. Check email field validation rules",
      "3. Remove any circular or complex validation patterns",
      "4. Simplify to basic email regex: ^[\\w\\.-]+@[\\w\\.-]+\\.[a-zA-Z]{2,}$",
      "5. Check phone field for similar issues"
    ],
    "settings_logo_fix": [
      "1. Go to Settings > Data Model > settings collection",
      "2. Add new field: 'logo'",
      "3. Type: File (Image)",
      "4. Interface: Image",
      "5. Make it optional/nullable"
    ]
  }
}
